(function(e){function t(t){for(var a,r,c=t[0],s=t[1],l=t[2],d=0,p=[];d<c.length;d++)r=c[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&p.push(o[r][0]),o[r]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(a=!1)}a&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},o={app:0},i=[];function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var u=s;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0bcd":function(e,t,n){"use strict";n("d446")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23"),o={id:"nav"},i=Object(a["f"])("Home"),r=Object(a["f"])(" | "),c=Object(a["f"])("About");function s(e,t){var n=Object(a["w"])("router-link"),s=Object(a["w"])("router-view");return Object(a["q"])(),Object(a["d"])(a["a"],null,[Object(a["e"])("div",o,[Object(a["g"])(n,{to:"/"},{default:Object(a["B"])((function(){return[i]})),_:1}),r,Object(a["g"])(n,{to:"/about"},{default:Object(a["B"])((function(){return[c]})),_:1})]),Object(a["g"])(s)],64)}n("0bcd");var l=n("6b0d"),u=n.n(l);const d={},p=u()(d,[["render",s]]);var f=p,v=n("6c02"),h=function(e){return Object(a["t"])("data-v-5f157e3e"),e=e(),Object(a["r"])(),e},g={class:"menu"},m=h((function(){return Object(a["e"])("div",null,"Pick a translating Language:",-1)})),y={class:"list"},b=Object(a["f"])("JavasSript"),k=Object(a["f"])("Java"),j=Object(a["f"])("Python");function O(e,t,n,o,i,r){var c=Object(a["w"])("router-link");return Object(a["q"])(),Object(a["d"])("div",null,[Object(a["e"])("div",g,[m,Object(a["e"])("div",y,[Object(a["g"])(c,{to:{name:"Flow",params:{lang:"javascript"}}},{default:Object(a["B"])((function(){return[b]})),_:1}),Object(a["g"])(c,{to:{name:"Flow",params:{lang:"java"}}},{default:Object(a["B"])((function(){return[k]})),_:1}),Object(a["g"])(c,{to:{name:"Flow",params:{lang:"python"}}},{default:Object(a["B"])((function(){return[j]})),_:1})])])])}var x={setup:function(){}};n("f9df");const w=u()(x,[["render",O],["__scopeId","data-v-5f157e3e"]]);var S=w;function E(e,t,n,o,i,r){var c=Object(a["w"])("MySVG");return Object(a["q"])(),Object(a["d"])("div",null,[Object(a["g"])(c,{language:o.lang},null,8,["language"])])}n("b0c0");var C=function(e){return Object(a["t"])("data-v-8790f4b6"),e=e(),Object(a["r"])(),e},_={class:"page my-border"},M=C((function(){return Object(a["e"])("div",{id:"drawing",class:"canvas"},null,-1)})),N={class:"code-area"};function P(e,t,n,o,i,r){var c=Object(a["w"])("highlightjs");return Object(a["q"])(),Object(a["d"])("div",_,[M,Object(a["e"])("div",N,[Object(a["e"])("div",null,Object(a["y"])(n.language.name),1),Object(a["g"])(c,{language:n.language.id,code:o.codes},null,8,["language","code"])])])}n("4ec9"),n("d3b7"),n("3ca3"),n("ddb0"),n("498a"),n("a434"),n("159b"),n("ac1f");var I=n("4378"),L=(n("42fc"),n("ec26")),T=n("d4ec"),B=n("bee2"),V=n("262e"),G=n("2caf"),J=(n("cb29"),{exec:{name:"exec",color:"#d64c11",polygon:"0,0 20,0 30,10 20,20 0,20"},int:{name:"int",color:"#32cd32",polygon:"0,0 30,0 30,20 0,20"},string:{name:"string",color:"#d984bf",polygon:"0,0 30,0 30,20 0,20"}}),q=Object(B["a"])((function e(t,n,a,o,i,r,c){Object(T["a"])(this,e);var s=this,l=J[n].color;s.id=Object(L["a"])();var u=t.group(),d=u.polygon(J[n].polygon).attr({fill:l});if(u.move(o,i),"in"===a&&n===J.string.name){var p=u.foreignObject(50,23);p.add(Object(I["d"])('<input type="text" id="'+s.id+'" class="socket-input-string" />',!0)),p.move(30,i);var f=document.getElementById(s.id);f.addEventListener("input",(function(e){var t=e.target.value;s.value='"'+t+'"'})),s.value='""'}s.hideInput=function(){"in"===a&&n===J.string.name&&document.getElementById(s.id).remove()},u.on("mouseenter",(function(){r.canDrag=!1,d.fill("#0000ff"),u.css("cursor","pointer"),r.makingConnection&&r.endSocket!==s&&"in"===a&&(r.endSocket=s,r.endNode=c,console.log("endSocket"))})),u.on("mouseleave",(function(){r.canDrag=!0,d.fill(l),u.css("cursor",null),r.makingConnection&&(r.endSocket=null,r.endNode=null)})),u.on("mousedown",(function(){"out"===a&&(console.log("start to draw"),r.makingConnection=!0,r.startSocket=s,r.startNode=c)})),u.on("click",(function(){console.log(s.id+"\n"+s.value)})),s.flow=a,s.svg=u,s.type=n,s.node=c})),A=function(){function e(t,n,a,o,i){Object(T["a"])(this,e);var r=this,c=t.group();c.rect(200,200).attr({fill:"#fff","fill-opacity":.7,"stroke-width":2,stroke:"#000",rx:15}),c.draggable();var s=c.text(i);s.move(80,10),r.name=i,r.id=Object(L["a"])(),r.svg=c,r.text=s,r.connections=[],r.inputs=[],r.outputs=[],r.allPath=o,r.state=a,r.network=n,c.on("beforedrag",(function(e){a.canDrag||e.preventDefault()})),c.on("dragmove",(function(){c.front(),r.connections.forEach((function(e){var t=r.allPath.get(e.id),n=10;e.input.type===J.string.name&&(n=40),t.plot("M "+e.output.svg.cx()+" "+e.output.svg.cy()+" L "+(e.input.svg.cx()-n)+" "+e.input.svg.cy())}))}))}return Object(B["a"])(e,[{key:"next",value:function(e,t,n){var a=this.network.execConnections.get(e);a?a.node.execute(t,n):this.network.end()}},{key:"addSocket",value:function(e,t){var n=this,a=-10,o=20;"out"===t?(a=190,o+=40*n.outputs.length):o+=40*n.inputs.length;var i=new q(n.svg,e,t,a,o,n.state,n);"out"===t?n.outputs.push(i):n.inputs.push(i)}},{key:"addConnection",value:function(e,t,n){this.connections.push({id:e,output:t,input:n})}}]),e}(),D=function(e,t){return"java"===e?[{type:"static",value:"System"},{type:"static",value:"out"},{type:"call",value:"println",params:[{items:t}]}]:"javascript"===e?[{type:"static",value:"window"},{type:"call",value:"alert",params:[{items:t}]}]:"python"===e?[{type:"call",value:"print",params:[{items:t}]}]:[]},F=function(e){Object(V["a"])(n,e);var t=Object(G["a"])(n);function n(){return Object(T["a"])(this,n),t.apply(this,arguments)}return Object(B["a"])(n,[{key:"execute",value:function(e,t){var n=this,a=[];n.network.valueConnections.has(n.inputs[1].id)?(a.push({type:"localVar",id:"execution-instance",mid:"entrypoint"}),a.push({type:"classVar"}),n.trace(n.inputs[1].id,a[1])):a.push({type:"value",value:n.inputs[1].value});var o=D(t,a);e.children.push({type:"call",items:o}),n.next(n.outputs[0].id,e,t)}},{key:"trace",value:function(e,t){var n=this,a=n.network.valueConnections.get(e);t.id=a.node.id}}]),n}(A),H=function(e){Object(V["a"])(n,e);var t=Object(G["a"])(n);function n(){return Object(T["a"])(this,n),t.apply(this,arguments)}return Object(B["a"])(n,[{key:"execute",value:function(e,t){var n=this;if(n.network.valueConnections.has(n.inputs[1].id))console.log("ok I will find value");else{var a=n.inputs[1].value;e.children.push({type:"assign",left:{items:[{type:"localVar",id:"execution-instance",mid:"entrypoint"},{type:"classVar",id:n.id}]},right:{expression:{items:[{type:"value",value:a}]}}}),n.next(n.outputs[0].id,e,t)}}},{key:"buildTree",value:function(e,t){var n=this;e.children.push({type:"init",id:n.id,left:{class:"String",name:"myStringVar1"}}),t.children.push({type:"assign",left:{items:[{type:"instance"},{type:"classVar",id:n.id}]},right:{expression:{items:[{type:"value",value:'""'}]}}})}}]),n}(A),U=n("257e"),Y=function(e){Object(V["a"])(n,e);var t=Object(G["a"])(n);function n(e,a,o,i,r){var c;Object(T["a"])(this,n),c=t.call(this,e,a,o,i,r);var s=Object(U["a"])(c),l=s.svg.foreignObject(200,100);l.add(Object(I["d"])('<button id="button1">Button</button>',!0)),l.move(0,100);var u=document.getElementById("button1");return u.addEventListener("click",(function(){a.refresh(),s.entrypointMethod?s.execute(s.entrypointMethod,s.lang):alert("You can no entrypoint!")})),c}return Object(B["a"])(n,[{key:"execute",value:function(e,t){this.next(this.outputs[0].id,e,t)}},{key:"setEntrypoint",value:function(e){this.entrypointMethod=e}},{key:"setLang",value:function(e){this.lang=e}}]),n}(A),z=(n("fb6a"),{parseTreeNodeIds:function(e,t,n){var a=this;if("class"===e.type)console.log("class not need id");else if("init"===e.type){if("class"===n.type)t[0].set(e.id,e);else if("method"===n.type){var o=t[1].get(e.id);o||(o=new Map,t[1].set(e.id,o)),o.set(e.id,e)}}else if("method"===e.type){var i=t[1].get(e.id);i||(i=new Map,t[1].set(e.id,i)),e.params&&e.params.forEach((function(e){i.set(e.id,e)}))}e.children&&e.children.forEach((function(n){a.parseTreeNodeIds(n,t,e)}))},getIndent:function(e){if(e<1)return"";var t="";while(e>0)t+="\t",e-=1;return t},makeGetterPhrase:function(e,t,n){var a=this,o="";return e.forEach((function(i,r){if("instance"===i.type)o+=t;else if("classVar"===i.type){var c=n[0].get(i.id);o+=c.left.name}else if("localVar"===i.type){var s=n[1].get(i.mid).get(i.id);o+=s.left.name}else"value"===i.type?o+=i.value:"new"===i.type?(i.keyword&&(o+=i.keyword+" "),o+=i.value):"static"===i.type?o+=i.value:"call"===i.type?(o+=i.value,o+="(",i.params.forEach((function(e,t,i){o+=a.makeGetterPhrase(e.items,"this",n),t<i.length-1&&(o+=", ")})),o+=")"):"expression"===i.type&&console.log("call item may have parameters as expression");r<e.length-1&&(o+=".")})),o},makeExpression:function(e,t,n){var a=this;return e.operator?"("+a.makeExpression(e.left,t,n)+" "+e.operator+" "+a.makeExpression(e.right,t,n)+")":a.makeGetterPhrase(e.items,t,n)},getClassName:function(e){var t="";if(e.length>0){var n=0;while(n<e.length){var a=e[n].toLowerCase();t+=a.charAt(0).toUpperCase()+a.slice(1),n+=1}}return t},getReferenceName:function(e){var t=e[0].toLowerCase();if(e.length>0){var n=1;while(n<e.length){var a=e[n].toLowerCase();t+=a.charAt(0).toUpperCase()+a.slice(1),n+=1}}return t}});function R(e,t,n,a,o){var i=z.getIndent(t),r="";"class"===e.type?r+=i+e.type+" "+e.name+" {\n":"method"===e.type?(r+=i+e.name+"(",e.params&&e.params.forEach((function(e,t){t>0&&(r+=", "),r+=e.name})),r+=") {\n"):"init"===e.type?"class"===o||(r+=i+e.left.class+" "+e.left.name,e.right&&(r+=" = "+z.makeExpression(e.right.expression,"this",a)),r+=";\n"):"assign"===e.type?(r+=i+z.makeGetterPhrase(e.left.items,"this",a),r+=" = "+z.makeExpression(e.right.expression,"this",a)+";\n"):"entrypoint"===e.type||("call"===e.type?r+=z.makeExpression(e,"this",a)+";\n":"if"===e.type&&(r+=i+"if "+z.makeExpression(e.expression,"this",a)+" {\n")),"entrypoint"===o&&(r=r.trim()+"\n"),n[0]+=r,e.children?(e.children.forEach((function(o){R(o,t+1,n,a,e.id)})),"entrypoint"===e.type?n[0]+="\n":n[0]+=i+"}\n"):"class"!==e.type&&"method"!==e.type&&"if"!==e.type||(n[0]+=i+"}\n")}function X(e,t,n,a,o){var i=z.getIndent(t),r="";"class"===e.type?r+=i+"public "+e.type+" "+e.name+" {\n":"method"===e.type?(r+=i+"public "+e.name+"(",e.params&&e.params.forEach((function(e,t){t>0&&(r+=", "),r+=e.class+" "+e.name})),r+=") {\n"):"init"===e.type?"class"===o?r+=i+"public "+e.left.class+" "+e.left.name+";\n":(r+=i+e.left.class+" "+e.left.name,e.right&&(r+=" = "+z.makeExpression(e.right.expression,"this",a)),r+=";\n"):"assign"===e.type?(r+=i+z.makeGetterPhrase(e.left.items,"this",a),r+=" = "+z.makeExpression(e.right.expression,"this",a)+";\n"):"entrypoint"===e.type?r+=i+"public static void main(String[] args) {\n":"call"===e.type?r+=i+z.makeExpression(e,"this",a)+";\n":"if"===e.type&&(r+=i+"if "+z.makeExpression(e.expression,"this",a)+" {\n"),n[0]+=r,e.children?(e.children.forEach((function(o){X(o,t+1,n,a,e.id)})),n[0]+=i+"}\n"):"class"!==e.type&&"method"!==e.type&&"if"!==e.type||(n[0]+=i+"}\n")}function K(e,t,n,a,o){var i=z.getIndent(t),r="";"class"===e.type?r+=i+e.type+" "+e.name+":\n":"method"===e.type?(r+=i+"def "+e.name+"(self",e.params&&e.params.forEach((function(e){r+=", "+e.name})),r+="):\n"):"init"===e.type?"class"===o||(r+=i+e.left.name,e.right&&(r+=" = "+z.makeExpression(e.right.expression,"self",a)),r+="\n"):"assign"===e.type?(r+=i+z.makeGetterPhrase(e.left.items,"self",a),r+=" = "+z.makeExpression(e.right.expression,"self",a)+"\n"):"entrypoint"===e.type?r+='if __name__ == "__main__":\n':"call"===e.type?r+=z.makeExpression(e,"self",a)+"\n":"if"===e.type&&(r+=i+"if "+z.makeExpression(e.expression,"self",a)+" \n"),"entrypoint"===o&&(r=i+r.trim()+"\n"),n[0]+=r,e.children?(e.children.forEach((function(o){K(o,t+1,n,a,e.id)})),n[0]+="\n"):"class"!==e.type&&"method"!==e.type&&"if"!==e.type||(n[0]+="\n\n")}var Q={props:{language:Object},setup:function(e){var t=Object(a["v"])(""),n=new Map,o={},i=[new Map,new Map],r={type:"class",id:"class",name:"Test",children:[]},c={type:"entrypoint",id:"entrypoint",children:[]},s="",l="",u=null;"javascript"===e.language.id?(s="const",l="constructor",u="new"):"java"===e.language.id?(s="Test",l="Test",u="new"):"python"===e.language.id&&(s="",l="__init__"),o.execConnections=new Map,o.valueConnections=new Map,o.nodes=[],o.end=function(){var n=[""],a=[""];"javascript"===e.language.id?(R(r,0,n,i,null),R(c,0,a,i,"entrypoint"),t.value=n[0].trim()+"\n\n"+a[0].trim(),new Function(t.value)()):"java"===e.language.id?(r.children.push(c),X(r,0,n,i,null),t.value=n[0].trim()):"python"===e.language.id&&(K(r,0,n,i,null),K(c,0,a,i,"entrypoint"),t.value=n[0].trim()+"\n\n\n"+a[0].trim())},o.refresh=function(){i[0].clear(),i[1].clear(),r.children.splice(0,r.children.length),this.scanNodes(),c.children.splice(0,c.children.length),c.children.push({type:"init",id:"execution-instance",left:{class:s,name:"classInstance1"},right:{expression:{items:[{type:"new",value:"Test()",keyword:u}]}}});var e=new Map;e.set("execution-instance",c.children[0]),i[1].set("entrypoint",e)},o.scanNodes=function(){var e={type:"method",id:Object(L["a"])(),name:l,return:{class:""},params:[],children:[]};o.nodes.forEach((function(t){t.buildTree&&t.buildTree(r,e)})),r.children.push(e),z.parseTreeNodeIds(r,i,null),console.log(i[0].keys()),console.log(i[1].keys())};var d={makingConnection:!1,startSocket:null,endSocket:null,canDrag:!0,startNode:null,endNode:null};return Object(a["o"])((function(){var t=document.getElementById("drawing");while(t.firstChild)t.removeChild(t.firstChild);var a=Object(I["d"])().addTo("#drawing").size("70vw","100vh"),i=a.path("M 0 0 L 0 0");i.stroke({color:"#d61c00",width:5,linecap:"round",linejoin:"round"}),i.hide(),a.on("mouseup",(function(){if(d.makingConnection)if(d.endSocket)if(i.hide(),d.startNode===d.endNode)alert("Cannot make connection on the same node!");else if(o.execConnections.has(d.startSocket.id))alert("Output socket can only have 1 connection!");else if(o.execConnections.get(d.startSocket.id)===d.endSocket.id)alert("Cannot make duplicate connection!");else if(d.startSocket.type!==d.endSocket.type)alert("Not same type!");else{console.log("make connection!");var e=Object(L["a"])(),t=10;d.endSocket.type===J.string.name&&(t=40);var r=a.path("M "+d.startSocket.svg.cx()+" "+d.startSocket.svg.cy()+" L "+(d.endSocket.svg.cx()-t)+" "+d.endSocket.svg.cy());r.stroke({color:"#a63c01",width:5,linecap:"round",linejoin:"round"}),n.set(e,r),d.startNode.addConnection(e,d.startSocket,d.endSocket),d.endNode.addConnection(e,d.startSocket,d.endSocket),d.startNode.svg.front(),d.endNode.svg.front(),d.startSocket.type===J.exec.name?o.execConnections.set(d.startSocket.id,d.endSocket):o.valueConnections.set(d.endSocket.id,d.startSocket),d.endSocket.hideInput()}else i.hide();d.makingConnection=!1,d.startSocket=null,d.endSocket=null,d.startNode=null,d.endNode=null})),a.on("mousemove",(function(e){if(d.makingConnection){var t=d.startSocket.svg.cx(),n=d.startSocket.svg.cy(),a=e.offsetX,o=e.offsetY;i.plot("M "+t+" "+n+" L "+a+" "+o),i.show()}}));var r=new Y(a,o,d,n,"Button v2");r.addSocket(J.exec.name,"out"),r.addSocket(J.int.name,"out"),r.setEntrypoint(c),r.setLang(e.language.id);var s=new H(a,o,d,n,"myStringVar1");s.addSocket(J.exec.name,"in"),s.addSocket(J.exec.name,"out"),s.addSocket(J.string.name,"out"),s.addSocket(J.string.name,"in");var l=new F(a,o,d,n,"Alert()");l.addSocket(J.exec.name,"in"),l.addSocket(J.exec.name,"out"),l.addSocket(J.string.name,"in"),o.nodes.push(r),o.nodes.push(s),o.nodes.push(l),o.refresh()})),{codes:t}}};n("8088");const W=u()(Q,[["render",P],["__scopeId","data-v-8790f4b6"]]);var Z=W,$={components:{MySVG:Z},setup:function(){var e={javascript:{name:"JavaScript",id:"javascript"},java:{name:"Java",id:"java"},python:{name:"Python",id:"python"}},t=Object(v["c"])();return{lang:e[t.params.lang]}}};const ee=u()($,[["render",E]]);var te=ee,ne={class:"about"},ae=Object(a["e"])("h1",null,"This is an about page",-1),oe=[ae];function ie(e,t){return Object(a["q"])(),Object(a["d"])("div",ne,oe)}const re={},ce=u()(re,[["render",ie]]);var se=ce,le=[{path:"/",name:"Home",component:S},{path:"/flow/:lang",name:"Flow",component:te},{path:"/about",name:"About",component:se}],ue=Object(v["a"])({history:Object(v["b"])(),routes:le}),de=ue,pe=n("5502"),fe=Object(pe["a"])({state:{},mutations:{},actions:{},modules:{}}),ve=(n("6470"),n("1020")),he=n.n(ve),ge=n("4dd1"),me=n.n(ge),ye=n("332f"),be=n.n(ye),ke=n("9510"),je=n.n(ke),Oe=n("b056");he.a.registerLanguage("javascript",me.a),he.a.registerLanguage("java",be.a),he.a.registerLanguage("python",je.a),Object(a["c"])(f).use(fe).use(de).use(Oe["a"]).mount("#app")},8088:function(e,t,n){"use strict";n("ae26")},ac40:function(e,t,n){},ae26:function(e,t,n){},d446:function(e,t,n){},f9df:function(e,t,n){"use strict";n("ac40")}});
//# sourceMappingURL=app.a1b224ba.js.map